<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base64 Decode Tool</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>
<body>
  <section class="section">
    <div class="container">
      <h1 class="title">Base64 Decode Online Tool</h1>
      <p class="subtitle">Decode Base64 strings to their original text.</p>

      <div class="field">
        <label class="label" for="base64Input">Base64 String</label>
        <div class="control">
          <textarea class="textarea" id="base64Input" placeholder="Enter your Base64 string"></textarea>
        </div>
      </div>

      <div class="field is-grouped">
        <div class="control">
          <label class="button is-info">
            <span>Upload File</span>
            <input type="file" style="display: none;" id="fileInput" />
          </label>
        </div>
        <div class="control">
          <label class="checkbox p-3">
            <input type="checkbox" id="autoCheckbox"> Auto Update
          </label>
        </div>
        <div class="control">
          <button class="button is-primary" id="decodeButton">Decode</button>
        </div>
       
          <div class="control">
            <button class="button is-link" id="sampleButton">Use Sample</button>
          </div>
       
      </div>

      <div class="field">
        <label class="label">Decoded Text</label>
        <div class="control">
          <pre class="is-family-monospace" id="decodedText"></pre>
        </div>
      </div>

      <div class="field is-grouped">
        <div class="control">
          <button class="button is-info" id="copyButton" disabled>Copy</button>
        </div>
        <div class="control">
          <a class="button is-success" id="downloadButton" download="decoded_text.txt" disabled>Download</a>
        </div>
      </div>

     

      <div class="field">
        <div class="notification is-danger" id="errorNotification" style="display: none;"></div>
      </div>
    </div>
  </section>

  <script src="base64.js">
    const decodeButton = document.getElementById('decodeButton');
    const copyButton = document.getElementById('copyButton');
    const downloadButton = document.getElementById('downloadButton');
    const inputField = document.getElementById('base64Input');
    const fileInput = document.getElementById('fileInput');
    const outputArea = document.getElementById('decodedText');
    const errorNotification = document.getElementById('errorNotification');
    const autoCheckbox = document.getElementById('autoCheckbox');

    let autoUpdate = false;
    const sampleButton = document.getElementById('sampleButton');

sampleButton.addEventListener('click', () => {
  const sampleBase64String = 'SGVsbG8gd29ybGQh'; // Replace with your desired Base64 string
  inputField.value = sampleBase64String;
  decodeBase64();
});
    decodeButton.addEventListener('click', () => {
      decodeBase64();
    });

    copyButton.addEventListener('click', () => {
  const range = document.createRange();
  range.selectNode(outputArea);
  window.getSelection().removeAllRanges();
  window.getSelection().addRange(range);
  document.execCommand('copy');
  window.getSelection().removeAllRanges();
  alert('Copied to clipboard!');
});


 
    downloadButton.addEventListener('click', () => {
      const decodedText = outputArea.textContent;
      const blob = new Blob([decodedText], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'decoded_text.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    fileInput.addEventListener('change', () => {
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          inputField.value = e.target.result;
          if (autoUpdate) {
            decodeBase64();
          }
        };
        reader.readAsText(file);
      }
    });

    autoCheckbox.addEventListener('change', () => {
      autoUpdate = autoCheckbox.checked;
      if (autoUpdate) {
        decodeBase64();
      }
    });

    inputField.addEventListener('input', () => {
      if (autoUpdate) {
        decodeBase64();
      }
      updateButtonsState();
    });

    function updateButtonsState() {
      const base64String = inputField.value.trim();
      if (base64String === '') {
        disableButtons();
      } else {
        enableButtons();
      }
    }

    function decodeBase64() {
      const base64String = inputField.value.trim();

      if (base64String === '') {
        showError('Please enter a Base64 string.');
        return;
      }

      try {
        const decodedText = atob(base64String);
        outputArea.textContent = decodedText;
        hideError();
        enableButtons();
      } catch (error) {
        showError('Error decoding Base64 string. Make sure the input is a valid Base64 string.');
        disableButtons();
      }
    }

    function showError(message) {
      errorNotification.textContent = message;
      errorNotification.style.display = 'block';
    }

    function hideError() {
      errorNotification.style.display = 'none';
    }

    function enableButtons() {
      copyButton.removeAttribute('disabled');
      downloadButton.removeAttribute('disabled');
    }

    function disableButtons() {
      copyButton.setAttribute('disabled', 'disabled');
      downloadButton.setAttribute('disabled', 'disabled');
    }
  </script>
</body>
</html>
