<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
  <title>ARI Calculator</title>

  <style>
    /* Custom CSS for better mobile responsiveness */
    @media screen and (max-width: 768px) {
      .column.is-half {
        width: 100%;
      }
    }
  </style>
</head>

<body>

  <section class="section">
    <div class="container">
      <div class="card">
        <div class="card-content">
          <h1 class="title">Automated Readability Index (ARI) Calculator</h1>

          <div class="columns">
            <div class="column is-half">
              <div class="field">
                <label class="label">Enter Text:</label>
                <div class="control">
                  <textarea class="textarea" id="inputText" placeholder="Enter your text here..." oninput="handleTextChange()"></textarea>
                </div>
              </div>
            </div>

            <div class="column is-half">
              <div class="card">
                <div class="card-content">
                  <h2 class="subtitle">Result</h2>
                  <p id="ariResult">ARI will be displayed here.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="field is-grouped is-grouped-centered">
            <div class="control">
              <label class="checkbox">
                <input type="checkbox" id="autoUpdateCheckbox" checked>
                Auto Update
              </label>
            </div>
            <div class="control">
              <button class="button is-primary" onclick="calculateARI()" id="calculateButton" disabled>
                Calculate ARI
              </button>
            </div>
            <div class="control">
              <button class="button" onclick="loadSampleText()">Sample Text</button>
            </div>
            <div class="control">
              <div class="file is-info has-name">
                <label class="file-label">
                  <input class="file-input" type="file" name="resume" id="fileInput" onchange="loadFile()">
                  <span class="file-cta">
                    <span class="file-icon">
                      <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                      Upload File
                    </span>
                  </span>
                  <span class="file-name" id="fileName">No file chosen</span>
                </label>
              </div>
            </div>
            <div class="control">
              <button class="button is-danger" onclick="clearText()">Clear</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

 <script>
    function calculateARI() {
    const inputText = document.getElementById('inputText').value;
    const words = inputText.split(/\s+/).length;
    const sentences = Math.max(1, inputText.split(/[.!?]+/).length - 1); // Ensure sentences is at least 1
    const characters = inputText.replace(/\s/g, '').length;

    const ari = 4.71 * (characters / words) + 0.5 * (words / sentences) - 21.43;
    const gradeLevel = calculateGradeLevel(ari);

    const resultElement = document.getElementById('ariResult');
    resultElement.innerHTML = `ARI Score: ${ari.toFixed(2)}<br>Reading Difficulty: ${getReadingDifficulty(gradeLevel)}<br>Grade Level: ${gradeLevel}<br>Age Range: ${getAgeRange(gradeLevel)}`;
  }

  function handleTextChange() {
    var autoUpdateCheckbox = document.getElementById('autoUpdateCheckbox');
  
    if (autoUpdateCheckbox.checked) {
      calculateARI();
    }
  }

  function calculateGradeLevel(ari) {
    return Math.max(1, Math.round(ari * 10) / 10); 
  }

  function getReadingDifficulty(gradeLevel) {
    if (gradeLevel < 3) {
      return 'Very Easy';
    } else if (gradeLevel < 6) {
      return 'Easy';
    } else if (gradeLevel < 9) {
      return 'Fairly Easy';
    } else if (gradeLevel < 12) {
      return 'Moderate';
    } else if (gradeLevel < 15) {
      return 'Fairly Difficult';
    } else {
      return 'Difficult';
    }
  }

  function getAgeRange(gradeLevel) {
    const minAge = Math.round(5 + gradeLevel);
    const maxAge = minAge + 1;
    return `${minAge}-${maxAge}`;
  }
      
        function loadSampleText() {
          document.getElementById('inputText').value = "The quick brown fox jumps over the lazy dog.";
          enableCalculateButton();
        }
      
        function loadFile() {
          const fileInput = document.getElementById('fileInput');
          const fileName = document.getElementById('fileName');
          const file = fileInput.files[0];
      
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              document.getElementById('inputText').value = e.target.result;
              enableCalculateButton();
            };
            reader.readAsText(file);
            fileName.textContent = file.name;
          }
        }
      
        function clearText() {
          document.getElementById('inputText').value = "";
          disableCalculateButton();
        }
      
        function enableCalculateButton() {
          document.getElementById('calculateButton').removeAttribute('disabled');
        }
      
        function disableCalculateButton() {
          document.getElementById('calculateButton').setAttribute('disabled', 'true');
        }
      

        document.getElementById('inputText').addEventListener('input', enableCalculateButton);
  </script>
</body>

</html>
